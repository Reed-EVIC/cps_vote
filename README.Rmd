---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit the Rmd file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# cpsvote

<!-- badges: start -->
<!-- badges: end -->

`cpsvote` provides an automated method for downloading, recoding, and merging selected years of the Current Population Survey's 
Voting and Registration Supplement, a biennial large-N survey about voter registration, voting, and non-voting in United States Federal Elections. The
package provides documentation for appropriate use of sample weights to generate statistical estimates. The package includes multiple vignettes
that illustrate different applications. 

## Sources

1994-2016 come from the [National Bureau of Economic Research](https://data.nber.org/cps/). 2018 comes from the [US Census Bureau](https://thedataweb.rm.census.gov/ftp/cps_ftp.html).

## Instructions for Alpha Testing

### Basic Use Information

1. *Install the Package*
   i) If you are a primary developer / contributor and are using a localized version control system, create your version control project
  using this URL: https://github.com/Reed-EVIC/cpsvote.git. 
      a) `devtools::load_all()` will load the package and all the associated functions.
   ii) If you are a tester, you may follow the procedure above, or else you can install the package using `remotes`:
      b) `remotes::install_github(https://github.com/Reed-EVIC/cpsvote)`
  
2. *Download the CPS Files*
    i) `cpsvote` will download the CPS files directly from two federal data repositories (data.nber.org/cps/cpsnov for 
  years 1994 - 2016; thedataweb.rm.census.gov/pub/cps/supps/ for 2018). By default `cpsvote` will create a new subdirectory
  in your working directory names "./cps_data" and store the compressed data files in that location.
    ii) If you choose to download data files and store them in a separate location, `cpsvote` can only process files that retain
  the original file name. See the "Data Description" vignette for a list of the expected file names.
    iii) `cpsvote::download_data(path = "dir", years = seq(start,end,sequence))` will download data
         a) Example: `cpsvote::download_data()` will download all data files  and place the files in the default download path ("./cps_data").
         b) Example: `cpsvote::download_data(path = "~/mydata/CPS", years = seq(2000, 2014, 4))` will download the 2000, 2004, 2008, and 2012 CPS 
  and place them in the path "~/mydata/CPS".

3. *Import the Data Into R and Create a Dataframe*
   i) `cpsvote` performs a series of data transformations that produce a set of comparably coded variables across all of the survey years. These
  variables are listed in the "Data Description" vignette.
   ii) `cpsvote::read_cps(data_dir = "dir", years = seq(start,end,sequence))` will read CPS data files located in "data_dir" into memory.  A reminder
  that the file names need to  be unmodified from what is stored at data.nber.org and thedataweb.rm.census.gov
       a) Example: `cps_vote <- cpsvote::read_cps()` will read all data files (1994 - 2018) from the default directory ("./cps_data"), recode columns
  to a common coding scheme, and merge into a single data frame labeled
  "cps_vote". 
       b) Example: `cps_vote <- cpsvote::read_cps(data_dir = "~/mydata/CPS), years = seq(1994, 2000, 2))` will load CPS from 1994, 1996, 1998, and 2000, 
  assuming  the data files are stored in "~/mydata/CPS", perform recodes, merge, and label "cps_vote".  
  
### Recommended First Steps

The steps shown below install the package locally, downlaod all CPS files from 1994 - 2018, load the files into memory, and results in a data frame
with CPS Voting and Registration Supplement data from 1994-2018. 

1. `remotes::install_github(https://github.com/Reed-EVIC/cpsvote)`
2. `library(cpsvote)`
3. `cpsvote::download_data()` (Only necessary if using the package for the first time; after that, the files will already be downloaded and you 
can skip this step)
4. `cps_vote <- cpsvote::read_cps()` Will read all available years into memory, places it in a data frame named `cps_vote`

## Outputs

Still working on it, but this!

![](vote_mode.gif)
